<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="BedrockBoot.Pages.DownloadPages.VersionsShowPages"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dev="using:DevWinUI"
    xmlns:jsonHandle="using:BedrockLauncher.Core.JsonHandle"
    xmlns:local="using:BedrockBoot.Pages.DownloadPages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    mc:Ignorable="d">
    <Page.Resources>
        <DataTemplate x:Key="VersionCardTemplate" x:DataType="jsonHandle:VersionInformation">
            <dev:SettingsCard
                Margin="5,0,5,0"
                Click="SettingsCard_Click"
                Description="{x:Bind Date}"
                Header="{x:Bind ID}"
                IsClickEnabled="True"
                Tag="{x:Bind}">
                <dev:SettingsCard.HeaderIcon>
                    <ImageIcon
                        Width="48"
                        Height="48"
                        Source="/Assets/Release_Icon.png" />
                </dev:SettingsCard.HeaderIcon>
            </dev:SettingsCard>
        </DataTemplate>
    </Page.Resources>
    <Grid>
        <Grid>
            <Grid
                MaxWidth="1000"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top">
                <StackPanel
                    Margin="5"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <FontIcon
                        Margin="4"
                        FontSize="18"
                        Foreground="Gray"
                        Glyph="&#xE71C;" />
                    <TextBlock
                        Margin="6,0,6,0"
                        VerticalAlignment="Center"
                        Foreground="Gray">
                        过滤器
                    </TextBlock>

                    <controls:Segmented
                        x:Name="VersionType"
                        Margin="5"
                        SelectedIndex="0"
                        SelectionChanged="VersionType_OnSelectionChanged"
                        SelectionMode="Single">

                        <controls:SegmentedItem Icon="{ui:FontIcon Glyph=&#xE7FC;}" ToolTipService.ToolTip="正式版" />
                        <controls:SegmentedItem Icon="{ui:FontIcon Glyph=&#xE8A1;}" ToolTipService.ToolTip="预览版" />
                        <controls:SegmentedItem Icon="{ui:FontIcon Glyph=&#xEA8D;}" ToolTipService.ToolTip="测试版" />
                    </controls:Segmented>
                    <Button>导入Appx</Button>
                </StackPanel>
                <StackPanel
                    Margin="5"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <AutoSuggestBox
                        x:Name="SearchBox"
                        Height="32"
                        MinWidth="200"
                        MaxWidth="500"
                        Margin="0,5,0,0"
                        VerticalAlignment="Center"
                        PlaceholderText="搜索"
                        QueryIcon="Find"
                        TextChanged="AutoSuggestBox_TextChanged" />
                </StackPanel>
            </Grid>
            <Grid Margin="0,64,0,10">
                <ScrollViewer x:Name="ScrollViewList" HorizontalAlignment="Stretch">
                    <Grid>
                        <ItemsRepeater
                            x:Name="VersionList"
                            Grid.Column="1"
                            MaxWidth="1000"
                            HorizontalAlignment="Stretch"
                            ItemTemplate="{StaticResource VersionCardTemplate}"
                            ItemsSource="{x:Bind VersionItems, Mode=OneWay}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="5" />
                            </ItemsRepeater.Layout>
                        </ItemsRepeater>
                    </Grid>
                </ScrollViewer>
                <dev:GotoTop
                    Margin="0,0,20,20"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Animated="True"
                    AutoHiding="True"
                    Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                    Target="{Binding ElementName=ScrollViewList}" />
            </Grid>
        </Grid>
    </Grid>
</Page>
